**ä¸€å¥è¯**ï¼šè®©æŸä¸ªå€¼çš„æ›´æ–°"ç­‰ä¸€ç­‰"ï¼Œä¼˜å…ˆè®©æ›´é‡è¦çš„æ›´æ–°å…ˆèµ°

## â–åŸºæœ¬è¯­æ³•

```javascript
const deferredValue = useDeferredValue(value);
```

**å‚æ•°**ï¼šä»»æ„å€¼ï¼ˆé€šå¸¸æ¥è‡ª stateï¼‰

**è¿”å›å€¼**ï¼šå»¶è¿Ÿç‰ˆæœ¬çš„è¯¥å€¼ï¼ˆReact è‡ªåŠ¨æ§åˆ¶å»¶è¿Ÿæ—¶æœºï¼‰

**æœ¬è´¨**ï¼šå‘Šè¯‰ Reactï¼š"è¿™ä¸ªå€¼çš„æ›´æ–°å¯ä»¥å¾€åæ’"

## â–æœ€ä½³ä½¿ç”¨åœºæ™¯

### âœ… è¯¥ç”¨çš„æƒ…å†µï¼š

1. **è¢«åŠ¨**æ¥æ”¶å˜åŒ–çš„å€¼ï¼ˆæ¯”å¦‚çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„ propï¼‰
2. **æ— æ³•ç›´æ¥æ§åˆ¶æ›´æ–°æºå¤´æ—¶**ï¼ˆæ¯”å¦‚ç¬¬ä¸‰æ–¹åº“çš„çŠ¶æ€ï¼‰
3. **éœ€è¦å’Œç”¨æˆ·è¾“å…¥åŒæ­¥ä½†æ¸²æŸ“å¤æ‚**ï¼ˆå¦‚è¶…å¤§åˆ—è¡¨éšè¾“å…¥æ›´æ–°ï¼‰

### âŒ ä¸è¯¥ç”¨çš„æƒ…å†µï¼š

1. èƒ½ç›´æ¥æ§åˆ¶çŠ¶æ€æ›´æ–°çš„æƒ…å†µï¼ˆä¼˜å…ˆç”¨`useTransition`ï¼‰
2. éœ€è¦ç²¾ç¡®æ§åˆ¶å»¶è¿Ÿæ—¶é—´çš„åœºæ™¯ï¼ˆç”¨é˜²æŠ–/èŠ‚æµï¼‰
3. ç®€å•å¿«é€Ÿçš„æ¸²æŸ“æ“ä½œ

## â–ç»å…¸ä½¿ç”¨æ¡ˆä¾‹

### åœºæ™¯ï¼šè¾“å…¥æ¡† + å¤§æ•°æ®åˆ—è¡¨

```javascript
function SearchResults({ query }) {
  // çˆ¶ç»„ä»¶ä¼ æ¥çš„ query è¢«åŠ¨å»¶è¿Ÿ
  const deferredQuery = useDeferredValue(query);
  
  // ç”¨å»¶è¿Ÿåçš„å€¼ç”Ÿæˆåˆ—è¡¨
  const list = Array(5000)
    .fill('')
    .map((_, i) => <div key={i}>{deferredQuery}</div>);

  return (
    <div>
      {/* å»¶è¿Ÿæ—¶æ˜¾ç¤ºæç¤º */}
      {query !== deferredQuery && <div>æ›´æ–°ä¸­...</div>}
      <div>{list}</div>
    </div>
  );
}
```

## â–useTransition VS useDeferredValue å¤§ç™½è¯å¯¹æ¯”


|              | useTransition                             | useDeferredValue                    |
| ------------ | ----------------------------------------- | ----------------------------------- |
| **æ§åˆ¶æƒ**   | ä½ **ä¸»åŠ¨**æŠŠä»»åŠ¡æ ‡è®°ä¸º"ä¸æ€¥" (ç”Ÿäº§è€…æ¨¡å¼) | æŸä¸ªå€¼è¢«åŠ¨å˜æˆ"æ…¢åŠæ‹" (æ¶ˆè´¹è€…æ¨¡å¼) |
| **é€‚ç”¨å…³ç³»** | ä½ æ§åˆ¶æ›´æ–°å‘èµ·çš„ä½ç½®                      | ä½ æ¥æ”¶åˆ«äººç»™çš„å€¼æ—¶ä¼˜åŒ–              |
| **ä»£ç ä½ç½®** | åœ¨è§¦å‘æ›´æ–°çš„åœ°æ–¹ä½¿ç”¨                      | åœ¨ä½¿ç”¨å€¼çš„åœ°æ–¹ä½¿ç”¨                  |

### ğŸŒ° å…·ä½“ä¾‹å­å¯¹æ¯”ï¼š**

å‡è®¾ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥:

**`useTransition`çš„åšæ³•ï¼š**

```
// ä½ ä¸»åŠ¨è¯´ï¼š"æ›´æ–°åˆ—è¡¨è¿™ä¸ªäº‹ä¸æ€¥ï¼"
setInput(value); // ç´§æ€¥ï¼šç«‹åˆ»æ›´æ–°è¾“å…¥æ¡†
startTransition(() => {
  setList(filter(value)); // ä¸æ€¥ï¼šæ…¢æ…¢æ›´æ–°åˆ—è¡¨
});
```

**`useDeferredValue`çš„åšæ³•ï¼š**

```
// åˆ—è¡¨è‡ªåŠ¨ç”¨å»¶è¿Ÿåçš„å€¼
const deferredValue = useDeferredValue(input); 
const list = filter(deferredValue); // åˆ—è¡¨ç”¨å»¶è¿Ÿåçš„å€¼è®¡ç®—
```
